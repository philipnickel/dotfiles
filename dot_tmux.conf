# Use zsh for all new windows/panes
set -g default-shell /bin/zsh 

# Make it a login shell so
set -g default-command "/bin/zsh -l"

unbind C-v
bind -T root C-v copy-mode
set-window-option mode-keys vi
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi V send -X select-line
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel 'pbcopy'


# keybindings for handling panes 
unbind S-h
unbind S-j
unbind S-k
unbind S-l

# Prefix + Shift-h/j/k/l => send arrow keys to the pane (repeatable)
bind -r h send-keys Left
bind -r j send-keys Down
bind -r k send-keys Up
bind -r l send-keys Right

# Repeatable pane resizing with Shift+H/J/K/L (after prefix)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# --- Option + h/j/k/l for splitting panes ---

# Horizontal (split left/right)
bind -n M-h split-window -h -c "#{pane_current_path}"
bind -n M-l split-window -h -c "#{pane_current_path}"

# Vertical (split up/down)
bind -n M-j split-window -v -c "#{pane_current_path}"
bind -n M-k split-window -v -c "#{pane_current_path}"





#set-environment -g PATH "/usr/local/bin:/bin:/usr/bin"

# Set default shell to user's configured shell

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'vaaleyard/tmux-dotbar'

unbind C-b
# macOS terminals do not pass the Command modifier through to tmux, so Raycast's
# hyper chord (ctrl+option+command+F) arrives as ctrl+F.  Keep both ctrl+F and
# ctrl+option+F as prefixes so the hyper chord works while still catching the
# raw ctrl+F sequence if needed.
set-option -g prefix C-f
bind-key C-f send-prefix


# windows navigation

bind-key -n F7 previous-window
bind-key -n F9 next-window


set -g @vim_navigator_prefix_mapping_clear_screen ""

bind-key x kill-pane # skip "kill-pane 1? (y/n)" prompt
set -g detach-on-destroy off  # don't exit from tmux when closing a session

# Direct window navigation with Cmd+Option+Ctrl+J/K (no prefix needed)


set -g @plugin 'noscript/tmux-mighty-scroll'
set -g mouse on

# Extra
set -g @plugin 'sainnhe/tmux-fzf'

set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'jaclu/tmux-menus'
set -g @menus_trigger 'm'

set-option -g @plugin 'b0o/tmux-autoreload'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'


# Yank config: 
set -g @plugin 'tmux-plugins/tmux-yank'

# tmux dotbar theme configuration
# supposing you use catppuccin moccha
set -g @tmux-dotbar-bg default
set -g @tmux-dotbar-fg "#585b70"
set -g @tmux-dotbar-fg-current "#cdd6f4"
set -g @tmux-dotbar-fg-session "#9399b2"
set -g @tmux-dotbar-fg-prefix "#cba6f7"
set -g @tmux-dotbar-position bottom
#set -g @tmux-dotbar-right true
#set -g @tmux-dotbar-status-right "%H:%M"
set-option -g renumber-windows on
set -g base-index 1
setw -g pane-base-index 1

set -g @tmux-dotbar-window-status-separator " Â· "

set -g @continuum-restore 'on'

set -g allow-passthrough on

# Enable true color support
set-option -ga terminal-overrides ",*256col*:Tc"
set -g default-terminal "tmux-256color"
set -g terminal-features 'xterm-256color:RGB,screen-256color:RGB,tmux-256color:RGB'

setw -g synchronize-panes off

set-option -g renumber-windows on
set -g base-index 1
setw -g pane-base-index 1

# Ensure GNU coreutils (gdate) are used for plugin scripts on macOS
#set-environment -g PATH "/opt/homebrew/bin:/opt/homebrew/opt/coreutils/libexec/gnubin:$PATH"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
